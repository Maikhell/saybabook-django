{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{% static 'saybabook_app/vendor/bootstrap-5.3.8-dist/css/bootstrap.min.css' %}"
    />
    <title>Landing Page</title>
  </head>
  <body>
    <div class="container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <fieldset>
            <legend>Account Details</legend>
            {{ form.as_p }}
        </fieldset>

        <hr />

        <fieldset>
            <legend>Profile Details</legend>
            {{ profile_formset.management_form }}
            
            {% for profile_form in profile_formset %}
                {% if profile_form.instance.pk %}
                    <h4>Current Profile Picture</h4>
                    {% if profile_form.instance.userImage %}
                        <img src="{{ profile_form.instance.userImage.url }}" 
                             alt="Current Profile Picture" 
                             class="img-thumbnail" 
                             style="max-width: 150px; max-height: 150px"
                        />
                    {% endif %}
                {% endif %}
                
                {{ profile_form.id }} 
                
                <div class="mb-3">
                    <label for="{{ profile_form.name.id_for_label }}" class="form-label">Full Name</label>
                    {{ profile_form.name }}
                    <div class="text-danger small">{{ profile_form.name.errors }}</div>
                </div>

                <div class="mb-3">
                    <label for="{{ profile_form.email.id_for_label }}" class="form-label">Email Address</label>
                    {{ profile_form.email }}
                    <div class="text-danger small">{{ profile_form.email.errors }}</div>
                </div>
                
                <div class="mb-3">
                    <label for="{{ profile_form.userImage.id_for_label }}" class="form-label">Profile Picture</label>
                    {{ profile_form.userImage }}
                    <div class="text-danger small">{{ profile_form.userImage.errors }}</div>
                </div>
                
            {% endfor %}
            
        </fieldset>
        
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>
</div>
  </body>
</html>
